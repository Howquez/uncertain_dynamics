{{ block scripts }}
    <script src="{% static 'global/js/buttons.js' %}"></script>
    <script src="{% static 'global/js/modal_with_timer.js' %}"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{{ endblock }}

{{ block styles }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
{{ endblock }}


{{ block content }}
<body class="bg-light.bg-gradient">

    <!-- Header -->
    <nav class="navbar navbar-inverse sticky-top bg-white border-bottom justify-content-between" style="z-index:1">
        <h5 class="text-center">
            Instruktionen
        </h5>
        <div class="me-2 text-secondary" style="cursor: pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="dark" class="bi bi-calculator" viewBox="0 0 16 16" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCalculator" aria-controls="offcanvasCalculator" id="calculator_icon">
                <path d="M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"/>
                <path d="M4 2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-2zm0 4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-4z"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="dark" class="bi bi-info-circle-fill ms-2" viewBox="0 0 16 16" data-bs-toggle="offcanvas" data-bs-target="#offcanvasInstructions" aria-controls="offcanvasInstructions" id="instructions_icon">
                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
            </svg>
        </div>
    </nav>

    <div class="modal fade" id="modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <h4 class="mt-3">
                        Ablauf
                    </h4>

                    <p>
                        Die nächsten Seiten führen Sie durch die Instruktionen.
                        Auf jeder Seite stellen wir Ihnen mindestens eine Verständnisfrage.
                    </p>

                    <p>
                        Falls Sie die Instruktionen zu einem späteren Zeitpunkt während der Studie nochmals lesen möchten,
                        können Sie dies tun, indem Sie auf das <i class="bi bi-info-circle-fill"></i> Symbol oben auf Ihrem Bildschirm klicken.
                    </p>
                    <p>
                        Daneben hilft Ihnen das <i class="bi bi-calculator"></i> Symbol dabei, verschiedene Fälle zu betrachten und
                        die Ergebnisse verschiedener Szenarien während der Entscheidungsphase zu berechnen.
                        Das werden wir im Folgenden erklären.
                    </p>

                </div>
                <div class="d-flex justify-content-center modal-footer border-top-0">
                    <button type="button" id="modal_button" class="btn btn-outline-primary" data-bs-dismiss="modal">Verstanden</button>
                </div>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-10 col-md-10 col-lg-8">
                <!-- Decision Card -->
                <div class="card rounded mt-3 shadow-lg">
                    <div class="card-body">

                        <h4 class="mt-3">
                            Überblick
                        </h4>

                        <p>
                            Sie sind dabei, an einer Entscheidungsstudie teilzunehmen. Wenn Sie die Instruktionen
                            sorgfältig befolgen, können Sie einen beträchtlichen Geldbetrag verdienen, der von Ihren Entscheidungen und den
                            Entscheidungen von drei anderen Teilnehmern abhängt.
                        </p>

                        <p>
                            Während der gesamten Studie treffen Sie Entscheidungen, um Punkte zu verdienen. Am Ende der
                            Studie werden alle Punkte zusammengezählt und zusätzlich zu einer
                            Teilnahmegebühr von {{ session.config.participation_fee }} ausgezahlt.
                        </p>

                        <p>
                            Die Studie besteht aus <u>{{ session.config.num_rounds }} Entscheidungsrunden</u>
                            sowie einem kurzen Fragebogen.
                            Zu Beginn der Studie werden Sie mit drei anderen Teilnehmern zusammengebracht.
                            Ihre Gruppe besteht also, mit Ihnen eingeschlossen, aus vier Personen.
                            <u>Sie werden während der gesamten Studie mit denselben drei Teilnehmern zusammengebracht.</u>
                        </p>

                        <p>
                            Wir schätzen Ihre Zeit und möchten nicht, dass Sie zu lange darauf warten müssen, dass andere Gruppenmitglieder ihre
                            Entscheidungen treffen. Aus diesem Grund begrenzen wir die Zeit, die jeder Teilnehmer für seine oder ihre
                            Entscheidung hat, auf fünf Minuten in der ersten Runde und zweieinhalb Minuten in den folgenden Runden.
                            Wenn ein Teilnehmer diese Zeitgrenze überschreitet, scheidet er oder sie aus der Studie aus und wird
                            durch einen Bot ersetzt, um eine reibungslose Erfahrung für alle anderen Gruppenmitglieder zu gewährleisten.
                            Sie werden benachrichtigt, wenn das passiert.
                        </p>

                        <p>
                            Alle Ihre Entscheidungen werden vertraulich behandelt. Das bedeutet, dass
                            keiner der anderen Teilnehmer wissen wird, wer Sie sind.
                            Ebenso werden Sie nicht in der Lage sein, die Identität Ihrer Gruppenmitglieder zu erfahren.
                        </p>

                        <p>
                            Vor der ersten Runde erhält jeder Teilnehmer eine
                            <u>anfängliche Ausstattung von {{ session.config.initial_endowment }} Punkten</u>.
                        </p>

                        <hr class="">

                        <small>
                            {{ formfields }}
                        </small>

                        <div class="d-flex justify-content-center mt-5 mb-3">
                            <button class="btn btn-outline-primary" type="submit" id="submitButton">
                                Weiter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Instructions Offcanvas -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasInstructions" aria-labelledby="offcanvasInstructionsLabel">
            <div class="offcanvas-header">
                <h4 class="offcanvas-title" id="offcanvasInstructionsLabel">Instruktionen</h4>
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div>
                    {{ include C.EARNINGS_TEMPLATE }}
                </div>

                <h4 class="mt-5">
                    Ereignisse
                </h4>
                <div>
                    {{ include C.SHOCKS_TEMPLATE }}
                </div>
            </div>
        </div>

    <!-- Calculator Offcanvas -->
    {{ include C.CALCULATOR_TEMPLATE }}


</body>
{{ endblock }}